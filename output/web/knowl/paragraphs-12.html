<!DOCTYPE html>
<html lang="en-US">
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
</head>
<body class="ignore-math">
<section class="paragraphs"><h4 class="heading"><span class="title">Input and Output Redirection.</span></h4>
<p></p>
<p>There are a number of ways one can create a new file. Let's try some. First, use <code class="code-inline tex2jax_ignore">cd</code> to descend into one of your new directories if you are not already in one so that you are in an empty directory. Then let's try the following commands:</p>
<pre class="code-block tex2jax_ignore">touch newfile1.txt
echo 'I love open source!' &gt; newfile2.txt
echo 'I really love open source!' &gt;&gt; newfile3.txt
ls
</pre>
<p>You should now see three new files named <em class="emphasis">newfile1.txt</em>, <em class="emphasis">newfile2.txt</em>, and <em class="emphasis">newfile3.txt</em> respectively. The <code class="code-inline tex2jax_ignore">touch</code> command simply makes an empty file if no file by that name already exists in the directory. Otherwise <code class="code-inline tex2jax_ignore">touch</code> changes the last accessed/modified date . Understanding the result of the first line we typed is pretty straightforward. The second and third lines that we typed require a bit more explanation. As we learned  above, the <code class="code-inline tex2jax_ignore">echo</code> command simply outputs (or echoes) the argument(s) to the terminal, but here the <code class="code-inline tex2jax_ignore">echo</code> command has been used in combination with output redirection into a file.</p>
<p><dfn class="terminology">Output redirection</dfn> is a feature in the shell that allows the user to redirect the output using <code class="code-inline tex2jax_ignore">&gt;</code> or <code class="code-inline tex2jax_ignore">&gt;&gt;</code>. Recall that the <code class="code-inline tex2jax_ignore">echo</code> command normally prints to the screen. What we did above in creating new files with the <code class="code-inline tex2jax_ignore">echo</code> command was to use output redirection to redirect the output of the command into a file of the specified name. So, the command <code class="code-inline tex2jax_ignore">echo 'I love open source!' &gt; newfile2.txt</code> redirected the output of the <code class="code-inline tex2jax_ignore">echo</code> command into the <em class="emphasis">newfile2.txt</em> file. Both <code class="code-inline tex2jax_ignore">&gt;</code> and <code class="code-inline tex2jax_ignore">&gt;&gt;</code> will create a <em class="emphasis">new</em> file with the provided name if one does not already exist. Note that the <code class="code-inline tex2jax_ignore">&gt;</code> is the output redirection operator used for <em class="emphasis">overwriting</em> a file that might or might not already exist, while the <code class="code-inline tex2jax_ignore">&gt;&gt;</code> is an output operator that <em class="emphasis">appends</em> the output to an existing file or creates a new one if one does not already exist.  So, <code class="code-inline tex2jax_ignore">&gt;</code> should be used judiciously!</p>
<p>Let's look at the contents of the files that we created. Let's use <code class="code-inline tex2jax_ignore">cat</code> to see the file contents. Type the following one at a time:</p>
<pre class="code-block tex2jax_ignore">cat newfile1.txt
cat newfile2.txt
cat newfile3.txt
</pre>
<p>You might be wondering why we are using a command called <code class="code-inline tex2jax_ignore">cat</code>. The <code class="code-inline tex2jax_ignore">cat</code> command, which stands for <em class="emphasis">concatenate</em>, is used to concatenate standard input (typically the keyboard) or file(s) to the standard output. Like the name suggests, you can also use the <code class="code-inline tex2jax_ignore">cat</code> command to concatenate files. For example, if you try:</p>
<pre class="code-block tex2jax_ignore">cat newfile2.txt newfile3.txt &gt; newfile1.txt
cat newfile1.txt
</pre>
<p>You should see that <em class="emphasis">newfile1.txt</em> instead of being empty, now contains the concatenation of <em class="emphasis">newfile2.txt</em> and <em class="emphasis">newfile3.txt</em></p>
<p>You can also use the <code class="code-inline tex2jax_ignore">cat</code> command in combination with output redirection to create a multi-line file. Try typing the following lines to create a new multi-line file named <em class="emphasis">newfile_multi.txt</em>:</p>
<pre class="code-block tex2jax_ignore">cat &gt; newfile_multi.txt
these
are
multiple
lines
</pre>
<p>You can complete this command sequence by entering <code class="code-inline tex2jax_ignore">Control+D</code> which will cause the new file to be closed. You should now have a new file called <em class="emphasis">newfile_multi.txt</em>.</p>
<p>Analogous to output redirection, <dfn class="terminology">input redirection</dfn> in the  shell using <code class="code-inline tex2jax_ignore"> &lt; </code> or <code class="code-inline tex2jax_ignore">&lt;&lt;</code> allows you to redirect the input of a command.  So, if we want the response from a command to be written to a file instead of to the terminal, we can use output redirection, but if we want the input to a command to come from a file instead of from the keyboard, we use input redirection.</p>
<p>Let's look at an example of input redirection using the  shell command <code class="code-inline tex2jax_ignore">wc</code>, which stands for <em class="emphasis">word count</em>. This a command that as the name suggests can be used for counting. However, it does more than count words! It actually provides the line count, the word count, and the character count in the file(s) specified in the file arguments. By default, it displays all this in four-columnar output with the file name in the final column.</p>
<p>Let's try the following:</p>
<pre class="code-block tex2jax_ignore">wc &lt; newfile2.txt
</pre>
<p>The shell should reply with <code class="code-inline tex2jax_ignore">1  4 20 newfile2.txt</code> because  <em class="emphasis">newfile2.txt</em> contains 'I love open source!' which is 1 line, 4 words, and 20 characters. If you only want to count the number of words, you could use the <code class="code-inline tex2jax_ignore">-w</code> flag to display only the word count as follows:</p>
<pre class="code-block tex2jax_ignore">wc -w  &lt; newfile2.txt
</pre>
<p>Let's practice with input and output redirection using a temporary file. Let's redirect the output of the <code class="code-inline tex2jax_ignore">ls</code> command into a temporary file, and then use input redirection with <code class="code-inline tex2jax_ignore">wc -w</code> to get the word count of this file. (This is one way to count the number of files in your current directory.) Let's try the following:</p>
<pre class="code-block tex2jax_ignore">ls &gt; temp.txt
wc -w &lt; temp.txt
</pre>
<p>If you  are wondering if there is a better way than using a temporary file, there is. A <dfn class="terminology">pipe (|)</dfn> in the bash shell allows you to redirect (aka pipe) the output of one command into the input of another command. Let's see an example:</p>
<pre class="code-block tex2jax_ignore">ls | wc -w
</pre>
<p>Try it! This is an improvement because it is faster and avoids the use of a temporary file.</p>
<p>It is possible to use what we have learned thus far to make an executable script. Let's try it! Typing <code class="code-inline tex2jax_ignore"> cat &gt;&gt; helloworld.sh</code> will tell the shell to open a new file named <code class="code-inline tex2jax_ignore"> helloworld.sh</code> and to expect multiple lines of input from the keyboard. Type the following lines:</p>
<pre class="code-block tex2jax_ignore">cat &gt;&gt; helloworld.sh
# This is a comment in a bash script that displays Hello World!
echo 'Hello World!'
</pre>
<p>End the <code class="code-inline tex2jax_ignore">cat &gt;&gt; helloworld.sh</code> command sequence by typing <code class="code-inline tex2jax_ignore">Ctrl+D</code>. This will cause the file named <code class="code-inline tex2jax_ignore">helloworld.sh</code> to be completed and closed.</p>
<p>You should now have new file named  <code class="code-inline tex2jax_ignore">helloworld.sh</code>. However, we would like to make it executable so we can run it as a script. To make it executable, we use the <code class="code-inline tex2jax_ignore">chmod</code> command. The <code class="code-inline tex2jax_ignore">chmod</code> stands for <em class="emphasis">change file mode bits</em>.  To add execution, we will need the <code class="code-inline tex2jax_ignore">+x</code> option, which stands for 'add execution' and will change it to being executable. So, run the following in your shell to make it an executable file for all users:</p>
<pre class="code-block tex2jax_ignore">chmod +x helloworld.sh
</pre>
<p>To execute this script, you need to indicate the directory where to find it, which is the current directory. So, to run it, you can type the following:</p>
<pre class="code-block tex2jax_ignore">./helloworld.sh
</pre>
<p>We can create a more interactive bash script using the <code class="code-inline tex2jax_ignore">read</code> command which reads text from the keyboard. It is frequently used to make scripts interactive. However, we need a variable to store the result. In the bash shell, some variables, like environment variables, always exist and you can always access them. However, you can also create your own variables. As we have seen, you can use echo to see the value of a variable, but you must precede the variable name with the dollar sign ($). Let's see how all this works by trying the following, finishing with a <code class="code-inline tex2jax_ignore">Control+D</code>:</p>
<pre class="code-block tex2jax_ignore">cat &gt;&gt; hellouser.sh
# This is a comment in an interactive bash script that says hello to the user by name.
echo 'What is your first name?'
# In the next line, USERNAME is dynamically created as a new variable
read USERNAME
echo "Hello " $USERNAME
</pre>
<p>To run this new script, you will again need to make it executable.  Then you can run it.</p>
<pre class="code-block tex2jax_ignore">chmod +x hellouser.sh
./hellouser.sh
</pre></section><span class="incontext"><a href="sec_dev_basic_shell_commands.html#paragraphs-12" class="internal">in-context</a></span>
</body>
</html>
